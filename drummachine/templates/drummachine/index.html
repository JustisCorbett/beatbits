{% extends "drummachine/layout.html" %}

{% block title %}BeatBits{% endblock %}

{% block body %}
    <div class="option-container py-2">
        <div class="kit-field field is-grouped has-addons pt-2" id="kit-select">
            <label class="hidden" for="kits">Select A Kit</label>
            <select name="kits" id="kits" class="select">
                {% for kit in kits %}
                    <option value={{ kit.id }}>{{ kit.name }}</option>
                {% endfor %}
            </select>
            <button class="button is-light" id="kit-select-btn" onclick="loadKit(this)">Load Kit</button>
        </div>
        <div class="field is-grouped has-addons pt-2">
            <div class="input">
                <label class="hidden" for="bpm-input">BPM</label>
                <input class="slider" oninput="changeBpm(this)" name="bpm-input" id="bpm-input" type="range" value="140" min="60" max="180" step="1" />
                <span class="dark-info" id="bpm">140</span>
                <span class="light-info">BPM</span>
            </div>
        </div>
    </div>
    <div class="machine-container py-2">
        <div id="drum-machine" class="drum-machine">
            <div class="machine-row">
                <div class="instr-info-box" data-instr="LEX Hat(1)">
                    <div class="side-controls">
                        <div>
                            <button class="button is-light" onclick="removeInstr(this)" id="remove-btn">
                                <span class="icon is-large">
                                    <i class="fas fa-times"></i>
                                </span>
                            </button>
                        </div>
                        <div>
                            <button class="button is-light" onclick="muteInstr(this)" id="mute-btn">
                                <span class="icon is-large">
                                    <i class="fas fa-volume-up"></i>
                                </span>
                            </button>
                        </div>
                    </div>
                    <div class="instr-name hidden">
                        <h4 id="instr-name">placeholder</h4>
                    </div>
                    <div class="instr-controls hidden">
                        <div class="input">
                            <label class="hidden" for="pitch-input">Pitch</label>
                            <input class="slider" oninput="changePitch(this)" name="pitch-input" id="pitch-input" type="range" value="1" min="0.1" max="2" step="0.1" />
                            <span class="dark-info" name="pitch">1</span>
                            <span class="light-info">Pitch</span>
                        </div>
                        <div class="input">
                            <label class="hidden" for="volume-input">Volume</label>
                            <input class="slider" oninput="changeVolume(this)" name="volume-input" id="volume-input" type="range" value="0" min="-12" max="0" step="0.5" />
                            <span class="dark-info" name="volume">1</span>
                            <span class="light-info">Volume</span>
                        </div>
                    </div>
                    <div class="thin-btn" onclick="movePanel(this)">
                        <span class="icon is-small">
                            <i id="panel-button" class="fas fa-angle-right"></i>
                        </span>
                    </div>
                </div>
                <div class="drum-row" data-instr="LEX Hat(1)">
                    <div class="pad" data-selected="0" data-i="1" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="2" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="3" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="4" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="5" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="6" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="7" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="8" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="9" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="10" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="11" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="12" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="13" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="14" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="15" onclick="selectPad(this)"></div>
                    <div class="pad" data-selected="0" data-i="16" onclick="selectPad(this)"></div>
                </div>
            </div>
            <div class="control field is-grouped has-addons pb-1 pl-1">
                <label class="hidden" for="instrument-select">Select An Instrument To Add</label>
                <select name="instrument-select" id="instrument-select" class="select is-small">
                    <option value="">Loading ...</option>
                </select>
                <button class="button is-light is-small" id="add-instr-btn" onclick="addRow()">Add Instrument</button>
            </div>
        </div>
        <div class="bottom-controls py-2">
            <div class="field is-grouped has-addons">
                <button class="button is-light" onclick="startPattern()" id="play-btn">
                    <span class="icon is-medium">
                        <i class="fas fa-lg fa-play"></i>
                    </span>
                </button>
                <button class="button is-light" onclick="pausePattern()" id="pause-btn">
                    <span class="icon is-medium">
                        <i class="fas fa-lg fa-pause"></i>
                    </span>
                </button>
                <button class="button is-light" onclick="stopPattern()" id="stop-btn">
                    <span class="icon is-medium">
                        <i class="fas fa-lg fa-stop"></i>
                    </span>
                </button>
            </div>
            <div class="field has-addons">
                <button class="button is-success" onclick="saveBit()">Save Bit</button>
            </div>
        </div>
    </div>
{% endblock %}